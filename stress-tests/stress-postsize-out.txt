Velocità massima di scrittura del disco sequenziale (calcolata con dd, block size = 2M):
- test 1GB sequenziale: 103 MB/s
- test 4GB sequenziali: 77 MB/s

Throughput lato server nell'ultimo batch di 50 post inviati (vedi sotto): ~86 MB/s

Il server raggiunge la velocità massima di I/O su disco con un'overhead trascurabile (e nel suo complesso è profondamente I/O bound).






Test (2 comandi "test da 4" eseguiti consecutivamente):

$ for i in 1 2 3 4; do python stress-postsize.py && wc -l ../msgdb; done
513
0 60795 OK
1 60795 OK
2 60795 OK
3 60795 OK
4 60795 OK
5 60795 OK
6 60795 OK
7 60795 OK
8 60795 OK
9 60795 OK
10 60795 OK
11 60795 OK
12 60795 OK
13 60795 OK
14 60795 OK
15 60795 OK
16 60795 OK
17 60795 OK
18 60795 OK
19 60795 OK
20 60795 OK
21 60795 OK
22 60795 OK
23 60795 OK
24 60795 OK
25 60795 OK
26 60795 OK
27 60795 OK
28 60795 OK
29 60795 OK
30 60795 OK
31 60795 OK
32 60795 OK
33 60795 OK
34 60795 OK
35 60795 OK
36 60795 OK
37 60795 OK
38 60795 OK
39 60795 OK
40 60795 OK
41 60795 OK
42 60795 OK
43 60795 OK
44 60795 OK
45 60795 OK
46 60795 OK
47 60795 OK
48 60795 OK
49 60795 OK

0:00:00.209134
50 ../msgdb
513
0 60795 OK
1 60795 OK
2 60795 OK
3 60795 OK
4 60795 OK
5 60795 OK
6 60795 OK
7 60795 OK
8 60795 OK
9 60795 OK
10 60795 OK
11 60795 OK
12 60795 OK
13 60795 OK
14 60795 OK
15 60795 OK
16 60795 OK
17 60795 OK
18 60795 OK
19 60795 OK
20 60795 OK
21 60795 OK
22 60795 OK
23 60795 OK
24 60795 OK
25 60795 OK
26 60795 OK
27 60795 OK
28 60795 OK
29 60795 OK
30 60795 OK
31 60795 OK
32 60795 OK
33 60795 OK
34 60795 OK
35 60795 OK
36 60795 OK
37 60795 OK
38 60795 OK
39 60795 OK
40 60795 OK
41 60795 OK
42 60795 OK
43 60795 OK
44 60795 OK
45 60795 OK
46 60795 OK
47 60795 OK
48 60795 OK
49 60795 OK

0:00:00.509535
100 ../msgdb
513
0 60795 OK
1 60795 OK
2 60795 OK
3 60795 OK
4 60795 OK
5 60795 OK
6 60795 OK
7 60795 OK
8 60795 OK
9 60795 OK
10 60795 OK
11 60795 OK
12 60795 OK
13 60795 OK
14 60795 OK
15 60795 OK
16 60795 OK
17 60795 OK
18 60795 OK
19 60795 OK
20 60795 OK
21 60795 OK
22 60795 OK
23 60795 OK
24 60795 OK
25 60795 OK
26 60795 OK
27 60795 OK
28 60795 OK
29 60795 OK
30 60795 OK
31 60795 OK
32 60795 OK
33 60795 OK
34 60795 OK
35 60795 OK
36 60795 OK
37 60795 OK
38 60795 OK
39 60795 OK
40 60795 OK
41 60795 OK
42 60795 OK
43 60795 OK
44 60795 OK
45 60795 OK
46 60795 OK
47 60795 OK
48 60795 OK
49 60795 OK

0:00:04.024232
150 ../msgdb
513
0 60795 OK
1 60795 OK
2 60795 OK
3 60795 OK
4 60795 OK
5 60795 OK
6 60795 OK
7 60795 OK
8 60795 OK
9 60795 OK
10 60795 OK
11 60795 OK
12 60795 OK
13 60795 OK
14 60795 OK
15 60795 OK
16 60795 OK
17 60795 OK
18 60795 OK
19 60795 OK
20 60795 OK
21 60795 OK
22 60795 OK
23 60795 OK
24 60795 OK
25 60795 OK
26 60795 OK
27 60795 OK
28 60795 OK
29 60795 OK
30 60795 OK
31 60795 OK
32 60795 OK
33 60795 OK
34 60795 OK
35 60795 OK
36 60795 OK
37 60795 OK
38 60795 OK
39 60795 OK
40 60795 OK
41 60795 OK
42 60795 OK
43 60795 OK
44 60795 OK
45 60795 OK
46 60795 OK
47 60795 OK
48 60795 OK
49 60795 OK

0:00:05.648155
200 ../msgdb

$ for i in 1 2 3 4; do python stress-postsize.py && wc -l ../msgdb; done
513
0 60795 OK
1 60795 OK
2 60795 OK
3 60795 OK
4 60795 OK
5 60795 OK
6 60795 OK
7 60795 OK
8 60795 OK
9 60795 OK
10 60795 OK
11 60795 OK
12 60795 OK
13 60795 OK
14 60795 OK
15 60795 OK
16 60795 OK
17 60795 OK
18 60795 OK
19 60795 OK
20 60795 OK
21 60795 OK
22 60795 OK
23 60795 OK
24 60795 OK
25 60795 OK
26 60795 OK
27 60795 OK
28 60795 OK
29 60795 OK
30 60795 OK
31 60795 OK
32 60795 OK
33 60795 OK
34 60795 OK
35 60795 OK
36 60795 OK
37 60795 OK
38 60795 OK
39 60795 OK
40 60795 OK
41 60795 OK
42 60795 OK
43 60795 OK
44 60795 OK
45 60795 OK
46 60795 OK
47 60795 OK
48 60795 OK
49 60795 OK

0:00:06.881465
250 ../msgdb
513
0 60795 OK
1 60795 OK
2 60795 OK
3 60795 OK
4 60795 OK
5 60795 OK
6 60795 OK
7 60795 OK
8 60795 OK
9 60795 OK
10 60795 OK
11 60795 OK
12 60795 OK
13 60795 OK
14 60795 OK
15 60795 OK
16 60795 OK
17 60795 OK
18 60795 OK
19 60795 OK
20 60795 OK
21 60795 OK
22 60795 OK
23 60795 OK
24 60795 OK
25 60795 OK
26 60795 OK
27 60795 OK
28 60795 OK
29 60795 OK
30 60795 OK
31 60795 OK
32 60795 OK
33 60795 OK
34 60795 OK
35 60795 OK
36 60795 OK
37 60795 OK
38 60795 OK
39 60795 OK
40 60795 OK
41 60795 OK
42 60795 OK
43 60795 OK
44 60795 OK
45 60795 OK
46 60795 OK
47 60795 OK
48 60795 OK
49 60795 OK

0:00:09.859025
300 ../msgdb
513
0 60795 OK
1 60795 OK
2 60795 OK
3 60795 OK
4 60795 OK
5 60795 OK
6 60795 OK
7 60795 OK
8 60795 OK
9 60795 OK
10 60795 OK
11 60795 OK
12 60795 OK
13 60795 OK
14 60795 OK
15 60795 OK
16 60795 OK
17 60795 OK
18 60795 OK
19 60795 OK
20 60795 OK
21 60795 OK
22 60795 OK
23 60795 OK
24 60795 OK
25 60795 OK
26 60795 OK
27 60795 OK
28 60795 OK
29 60795 OK
30 60795 OK
31 60795 OK
32 60795 OK
33 60795 OK
34 60795 OK
35 60795 OK
36 60795 OK
37 60795 OK
38 60795 OK
39 60795 OK
40 60795 OK
41 60795 OK
42 60795 OK
43 60795 OK
44 60795 OK
45 60795 OK
46 60795 OK
47 60795 OK
48 60795 OK
49 60795 OK

0:00:09.898349
350 ../msgdb
513
0 60795 OK
1 60795 OK
2 60795 OK
3 60795 OK
4 60795 OK
5 60795 OK
6 60795 OK
7 60795 OK
8 60795 OK
9 60795 OK
10 60795 OK
11 60795 OK
12 60795 OK
13 60795 OK
14 60795 OK
15 60795 OK
16 60795 OK
17 60795 OK
18 60795 OK
19 60795 OK
20 60795 OK
21 60795 OK
22 60795 OK
23 60795 OK
24 60795 OK
25 60795 OK
26 60795 OK
27 60795 OK
28 60795 OK
29 60795 OK
30 60795 OK
31 60795 OK
32 60795 OK
33 60795 OK
34 60795 OK
35 60795 OK
36 60795 OK
37 60795 OK
38 60795 OK
39 60795 OK
40 60795 OK
41 60795 OK
42 60795 OK
43 60795 OK
44 60795 OK
45 60795 OK
46 60795 OK
47 60795 OK
48 60795 OK
49 60795 OK

0:00:13.020021
400 ../msgdb

------------------------------------------------------

Calcolo throughput a regime (ultimo batch da 50 post)

Dimensione DB finale: 400 post * 60 KB = ~24 MB
50 post da ~60 KB -> DB aumentato di ~3MB
File riscritto 50 volte (prima riscrittura 21 MB, ultima riscrittura 24 MB)
Media file: ~22.5 MB
Dati totali scritti: ~22.5 MB * 50 = ~1.125 GB
Tempo impiegato: 13.02s
Throughput: 1125 MB / 13.02s = ~86 MB/s
